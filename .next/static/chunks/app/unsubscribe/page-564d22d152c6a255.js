(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[669],{370:function(e,s,r){Promise.resolve().then(r.bind(r,8961))},8961:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return o}});var t=r(7437),a=r(2265),n=r(4033),i=r(9866),l=r(1396),c=r.n(l);function o(){let e=(0,n.useSearchParams)(),[s,r]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),[u,d]=(0,a.useState)("idle"),[m,b]=(0,a.useState)("");(0,a.useEffect)(()=>{let s=null==e?void 0:e.get("email"),t=null==e?void 0:e.get("token");s&&r(s),t&&o(t),s&&t&&h()},[e]);let h=async()=>{if(!s){b("Please enter your email address."),d("error");return}d("loading");try{let e=await (0,i.Wg)(s,l);e.success?d("success"):d("error"),b(e.message)}catch(e){d("error"),b("An unexpected error occurred. Please try again later.")}};return(0,t.jsx)("div",{className:"min-h-screen bg-amber-50 py-16",children:(0,t.jsx)("div",{className:"max-w-md mx-auto px-4",children:(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,t.jsx)("svg",{className:"h-12 w-12 text-amber-600",viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:(0,t.jsx)("path",{d:"M50,5 L50,95 M26,28 C26,28 37,35 50,28 C63,35 74,28 74,28 C74,28 66,50 74,72 C74,72 63,65 50,72 C37,65 26,72 26,72 C26,72 34,50 26,28 Z M35,50 C35,43 42,36 50,36 C58,36 65,43 65,50 C65,57 58,64 50,64 C42,64 35,57 35,50 Z M20,20 C20,20 36,36 50,20 C64,36 80,20 80,20 C80,20 64,64 80,80 C80,80 64,64 50,80 C36,64 20,80 20,80 C20,80 36,36 20,20 Z"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-center text-amber-900 mb-4",children:"Unsubscribe from Newsletter"}),"success"===u?(0,t.jsxs)("div",{className:"text-center space-y-6",children:[(0,t.jsx)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200 mb-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsx)("svg",{className:"h-6 w-6 text-green-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,t.jsx)("p",{className:"text-green-800",children:m})]})}),(0,t.jsx)("p",{className:"text-amber-700",children:"We're sorry to see you go. You can always subscribe again in the future."}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(c(),{href:"/",className:"text-amber-600 hover:text-amber-800 font-medium",children:"Return to Homepage"})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:["error"===u&&(0,t.jsx)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200 mb-4",children:(0,t.jsx)("p",{className:"text-red-800",children:m})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-amber-800",children:"Email Address"}),(0,t.jsx)("input",{type:"email",id:"email",value:s,onChange:e=>r(e.target.value),placeholder:"Your email address",className:"w-full px-4 py-3 rounded-lg bg-white border-amber-200 border-2 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 text-amber-900",disabled:"loading"===u})]}),(0,t.jsx)("button",{onClick:h,disabled:"loading"===u||!s,className:"w-full py-3 px-6 rounded-lg text-base font-medium text-white\n                  transition-all duration-300 relative overflow-hidden\n                  ".concat("loading"===u?"bg-amber-500 cursor-not-allowed":"bg-amber-800 hover:bg-amber-900"),children:"loading"===u?(0,t.jsxs)("span",{className:"flex items-center justify-center",children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Unsubscribe"}),(0,t.jsx)("p",{className:"text-sm text-amber-700 text-center",children:"Your privacy matters to us. We'll stop sending newsletter emails to this address."})]})]})})})})}},9866:function(e,s,r){"use strict";r.d(s,{OQ:function(){return a},Wg:function(){return i},zV:function(){return n}});var t=r(4756);let a=(0,t.eI)("https://obwokyhpvdqewaatrnma.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9id29reWhwdmRxZXdhYXRybm1hIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQzNjMzMjgsImV4cCI6MjA1OTkzOTMyOH0.DK8PEGmTyC32HWislTj1oDmx4y6JG0gK43HX2IR8xck");async function n(e,s,r){try{let{error:t}=await a.from("contact_submissions").insert([{name:e,email:s,message:r}]);if(t)throw t;return{success:!0,message:"Thank you for your message! We will get back to you soon."}}catch(e){return console.error("Error submitting contact form:",e),{success:!1,message:"Something went wrong. Please try again later."}}}async function i(e,s){try{let{data:s,error:r}=await a.from("newsletter_subscriptions").select("id").eq("email",e).eq("status","active").single();if(r||!s)return{success:!1,message:"Email not found in our active subscription list."};let{error:t}=await a.from("newsletter_subscriptions").update({status:"inactive",unsubscribed_at:new Date().toISOString()}).eq("email",e);if(t)throw t;return{success:!0,message:"Successfully unsubscribed from our newsletter."}}catch(e){return console.error("Newsletter unsubscribe error:",e),{success:!1,message:"Failed to unsubscribe. Please try again later."}}}(async function(){try{console.log("Checking database tables...");let{data:e,error:s}=await a.from("newsletter_subscriptions").select("id").limit(1);s?(console.error("Error checking newsletter_subscriptions table:",s),"42P01"===s.code&&(console.log("Creating newsletter_subscriptions table..."),console.error("Table missing! Please create the newsletter_subscriptions table manually."))):console.log("Newsletter table found:",null!==e)}catch(e){console.error("Failed to initialize database:",e)}})().catch(console.error)},1396:function(e,s,r){e.exports=r(6685)},4033:function(e,s,r){e.exports=r(8165)}},function(e){e.O(0,[685,36,971,596,744],function(){return e(e.s=370)}),_N_E=e.O()}]);
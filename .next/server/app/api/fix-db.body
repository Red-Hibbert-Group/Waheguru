{"success":false,"message":"Could not automatically fix the database structure. Please add the missing columns manually.","requiredColumns":[{"name":"id","type":"UUID","constraints":"PRIMARY KEY DEFAULT gen_random_uuid()"},{"name":"email","type":"TEXT","constraints":"NOT NULL UNIQUE"},{"name":"subscription_date","type":"TIMESTAMPTZ","constraints":"DEFAULT now()"},{"name":"status","type":"TEXT","constraints":"DEFAULT 'active'"},{"name":"source","type":"TEXT","constraints":"DEFAULT 'website'"},{"name":"unsubscribed_at","type":"TIMESTAMPTZ","constraints":""},{"name":"created_at","type":"TIMESTAMPTZ","constraints":"DEFAULT now()"},{"name":"updated_at","type":"TIMESTAMPTZ","constraints":"DEFAULT now()"}],"manualSql":"\n      -- Run this in the Supabase SQL Editor:\n      \n      -- First check if the table exists\n      CREATE TABLE IF NOT EXISTS newsletter_subscriptions (\n        id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n        email TEXT NOT NULL UNIQUE,\n        created_at TIMESTAMPTZ DEFAULT now() NOT NULL\n      );\n      \n      -- Then add each column if it doesn't exist\n      DO $$\n      BEGIN\n        -- Check and add subscription_date\n        IF NOT EXISTS (\n          SELECT FROM information_schema.columns \n          WHERE table_schema = 'public' \n          AND table_name = 'newsletter_subscriptions' \n          AND column_name = 'subscription_date'\n        ) THEN\n          ALTER TABLE public.newsletter_subscriptions \n          ADD COLUMN subscription_date TIMESTAMPTZ DEFAULT now();\n        END IF;\n        \n        -- Check and add status\n        IF NOT EXISTS (\n          SELECT FROM information_schema.columns \n          WHERE table_schema = 'public' \n          AND table_name = 'newsletter_subscriptions' \n          AND column_name = 'status'\n        ) THEN\n          ALTER TABLE public.newsletter_subscriptions \n          ADD COLUMN status TEXT DEFAULT 'active';\n        END IF;\n        \n        -- Check and add source\n        IF NOT EXISTS (\n          SELECT FROM information_schema.columns \n          WHERE table_schema = 'public' \n          AND table_name = 'newsletter_subscriptions' \n          AND column_name = 'source'\n        ) THEN\n          ALTER TABLE public.newsletter_subscriptions \n          ADD COLUMN source TEXT DEFAULT 'website';\n        END IF;\n        \n        -- Check and add unsubscribed_at\n        IF NOT EXISTS (\n          SELECT FROM information_schema.columns \n          WHERE table_schema = 'public' \n          AND table_name = 'newsletter_subscriptions' \n          AND column_name = 'unsubscribed_at'\n        ) THEN\n          ALTER TABLE public.newsletter_subscriptions \n          ADD COLUMN unsubscribed_at TIMESTAMPTZ;\n        END IF;\n        \n        -- Check and add updated_at\n        IF NOT EXISTS (\n          SELECT FROM information_schema.columns \n          WHERE table_schema = 'public' \n          AND table_name = 'newsletter_subscriptions' \n          AND column_name = 'updated_at'\n        ) THEN\n          ALTER TABLE public.newsletter_subscriptions \n          ADD COLUMN updated_at TIMESTAMPTZ DEFAULT now();\n        END IF;\n      END $$;\n      "}